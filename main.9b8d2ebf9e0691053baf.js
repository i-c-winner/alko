!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){},function(e,t,o){"use strict";o.r(t);o(0);class n{create(e){return`<div class="place-card">\n    <div class="place-card__image" style="background: url(${e.link});background-size: cover;" >\n      <button class="place-card__delete-icon"></button>\n    </div>\n    <div class="place-card__description">\n      <h3 class="place-card__name">${e.name}</h3>\n      <button class="place-card__like-icon"></button>\n    </div>\n  </div>`}like(){event.target.classList.contains("place-card__like-icon")&&event.target.classList.toggle("place-card__like-icon_liked")}deleteCard(e){if(e.target.classList.contains("place-card__delete-icon")){const t=e.target.closest(".place-card");e.currentTarget.removeChild(t)}}}class s{constructor(e){this.form=e}checkInputValidity(){let e=null;const t=Array.from(this.form);return t[1].classList.contains("popup__input_type_link-url")?t[0].validity.tooShort||t[0].validity.valueMissing||t[1].validity.typeMismatch||t[1].validity.valueMissing?(e=!1,e):(e=!0,e):t[0].validity.tooShort||t[0].validity.valueMissing||t[1].validity.tooShort||t[1].validity.valueMissing?(e=!1,e):(e=!0,e)}setSubmitButtonState(e){e?this.form.querySelector(".popup__button").classList.add("button_active"):this.form.querySelector(".popup__button").classList.remove("button_active")}setEventListeners(e,t,o){this.ifFirst=e,this.ifSecond=t,this.name=o,this.ifFirst||this.ifSecond?this.name.classList.remove("error-text_enabled"):this.name.classList.add("error-text_enabled")}}class r{constructor(e,t,o,n,s){this.typePopup=e,this.popup=t,this.forma=o,this._name=n,this._job=s}openContent(e,t){this.popup.classList.add("popup_is-opened"),"popup__form popup-user"===this.forma.className?(this.popup.classList.add("popup_is-opened"),this.typePopup.classList.remove("popup__content_is-opened"),this.forma.elements.user.value=e,this.forma.elements.aboutuser.value=t,Array.from(this.typePopup.querySelectorAll(".error-text")).forEach((function(e){e.classList.add("error-text_enabled")})),this.forma.querySelector(".popup__button_user").classList.add("button_active")):(this.typePopup.classList.remove("popup__content_is-opened"),this.forma.elements.name.value="",this.forma.elements.link.value="",Array.from(this.typePopup.querySelectorAll(".error-text")).forEach((function(e){e.classList.remove("error-text_enabled")})),this.forma.querySelector(".popup__button_content").classList.remove("button_active"))}closed(){this.popup.classList.remove("popup_is-opened"),this.typePopup.classList.add("popup__content_is-opened")}openUser(){this.popup.classList.add("popup_is-opened"),this.typePopup.classList.remove("popup__user_is-opened")}}const i=document.querySelector(".user-info__name"),c=document.querySelector(".user-info__job"),a=document.querySelector(".user-info__photo"),u=document.forms.new.elements.name,l=document.forms.new.elements.link,d=document.forms.newuser.elements.user,p=document.forms.newuser.elements.aboutuser;console.log(34),console.log(s);new s;console.log(36);const m=new class{constructor(e){this.path=e.baseUrl,this.user=e.headers}getInitialCards(){return fetch(this.path+"/cards",{headers:this.user}).then(e=>e.ok?e.json():Promise.reject(e)).catch(e=>Promise.reject(e))}userInfo(){return fetch(this.path+"/users/me",{headers:this.user}).then(e=>e.ok?e.json():Promise.reject(e)).catch(e=>Promise.reject(e))}userApdate(e,t){return fetch(this.path+"/users/me",{method:"PATCH",headers:this.user,body:JSON.stringify({name:e.value,about:t.value})}).then(e=>e.ok?e.json():Promise.reject(e)).catch(e=>Promise.reject(e))}}({baseUrl:"https://praktikum.tk/cohort9",headers:{authorization:"174103b5-a3c6-4ad5-a7cf-a79f567a83c5","Content-Type":"application/json"}}),f=new s(document.forms.newuser),h=new s(document.forms.new);console.log(n);const v=new n,y=new class{constructor(e,t){this.container=e,this.card=t}addCard(e){this.container.insertAdjacentHTML("beforeEnd",this.card(e))}render(e){e.forEach(e=>{this.addCard(e)})}}(document.querySelector(".places-list"),v.create,"xrt"),_=new r(document.querySelector("#popup-content"),document.querySelector(".popup"),document.forms.new),b=document.forms.newuser.elements.user,S=document.forms.newuser.elements.aboutuser,g=new class{constructor(e,t,o,n,s){this.name=o,this.job=n,this.newName=e,this.newJob=t,this.avatar=s}setUserInfo(){return{name:this.newName.textContent,job:this.newJob.textContent}}updateUserInfo(e){this.newName.textContent=e.name,this.newJob.textContent=e.about,this.avatar.style.backgroundImage="URL("+e.avatar+")"}}(i,c,b,S,a),L=new r(document.querySelector("#popup-user"),document.querySelector(".popup"),document.forms.newuser,d,p,a);m.getInitialCards().then(e=>{y.render(e),document.querySelector(".places-list").addEventListener("click",v.like),document.querySelector(".places-list").addEventListener("click",v.deleteCard)}).catch(e=>{console.log(e.message)}),m.userInfo().then(e=>{g.updateUserInfo(e)}).catch(e=>{console.log(e.message)}),document.forms.new.addEventListener("submit",(function(e){if(e.preventDefault(),h.checkInputValidity()){const e={name:u.value,link:l.value};y.addCard(e),_.closed()}})),document.forms.newuser.addEventListener("submit",e=>{e.preventDefault(),f.checkInputValidity()?m.userApdate(d,p).then(e=>{g.updateUserInfo(e),L.closed()}).catch(e=>{console.log(e.message)}):e.preventDefault()}),document.querySelector(".user-info__button").addEventListener("click",()=>{_.openContent()}),document.querySelector(".popup__close").addEventListener("click",()=>{_.closed()}),document.querySelector(".popup__close_user").addEventListener("click",()=>{L.closed()}),document.querySelector(".user-add__button").addEventListener("click",()=>{L.openContent(g.setUserInfo().name,g.setUserInfo().job)}),document.querySelector("#linkinfo").addEventListener("input",(function(){h.setEventListeners(document.querySelector("#linkinfo").validity.typeMismatch,document.querySelector("#linkinfo").validity.valueMissing,document.querySelector("#error-text-link"))})),document.querySelector("#textuser").addEventListener("input",(function(){f.setEventListeners(document.querySelector("#textuser").validity.tooShort,document.querySelector("#textuser").validity.valueMissing,document.querySelector("#error-text-user"))})),document.querySelector("#textinfo").addEventListener("input",(function(){h.setEventListeners(document.querySelector("#textinfo").validity.tooShort,document.querySelector("#textinfo").validity.valueMissing,document.querySelector("#error-text-info"))})),document.querySelector("#textjob").addEventListener("input",(function(){f.setEventListeners(document.querySelector("#textjob").validity.tooShort,document.querySelector("#textjob").validity.valueMissing,document.querySelector("#error-text-job"))})),document.forms.new.addEventListener("input",(function(){h.checkInputValidity()?h.setSubmitButtonState(!0):h.setSubmitButtonState(!1)})),document.forms.newuser.addEventListener("input",(function(){f.checkInputValidity()?f.setSubmitButtonState(!0):f.setSubmitButtonState(!1)})),document.querySelector(".places-list").addEventListener("click",(function(e){let t="";if(e.target.classList.contains("place-card__image")){document.querySelector(".img-size");const o=document.querySelector(".popup-image");o.classList.add("popup-image_open"),t=`<div class="img-closed-wrapper"><img  class="img-size" alt="Изображение описывваемого места" src= ${e.target.style.backgroundImage.slice(4,-1)}><img src="./images/close.svg" alt="" class="image-close"></div>`,o.insertAdjacentHTML("beforeEnd",t),document.querySelector(".image-close").addEventListener("click",(function(e){o.querySelector(".img-closed-wrapper").remove(),o.classList.remove("popup-image_open")}))}}))}]);